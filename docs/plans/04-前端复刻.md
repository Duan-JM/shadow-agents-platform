# é˜¶æ®µå››ï¼šå¤åˆ» Web å‰ç«¯åº”ç”¨

## ç›®æ ‡
é‡å†™å‰ç«¯ Web åº”ç”¨ï¼Œå®ç°ç”¨æˆ·ç•Œé¢å’Œäº¤äº’åŠŸèƒ½ã€‚ç§»é™¤æ‰€æœ‰ Dify å“ç‰Œå…ƒç´ ï¼Œä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼Œæä¾›å¯è‡ªå®šä¹‰çš„ç•Œé¢ã€‚

---

## æ€»ä½“æ€è·¯

### æŠ€æœ¯é€‰å‹
- **æ¡†æ¶**: Next.js 14+ (App Router)
- **UI åº“**: React 18+
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: React Context + Hooks
- **ç±»å‹æ£€æŸ¥**: TypeScript
- **HTTP å®¢æˆ·ç«¯**: Axios/Fetch API

### è®¾è®¡åŸåˆ™
1. **ç»„ä»¶åŒ–**ï¼šå¯å¤ç”¨çš„ç»„ä»¶è®¾è®¡
2. **å“åº”å¼**ï¼šé€‚é…å„ç§å±å¹•å°ºå¯¸
3. **å¯å®šåˆ¶**ï¼šæ”¯æŒä¸»é¢˜å’Œå“ç‰Œè‡ªå®šä¹‰
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä»£ç åˆ†å‰²ã€æ‡’åŠ è½½
5. **ç”¨æˆ·ä½“éªŒ**ï¼šæµç•…çš„äº¤äº’å’Œåé¦ˆ

---

## è¯¦ç»†æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆå§‹åŒ–é¡¹ç›®å’ŒåŸºç¡€é…ç½®

#### 1.1 å®‰è£…ä¾èµ–

**`web/package.json`**
```json
{
  "name": "shadow-agents-web",
  "version": "0.1.0",
  "description": "Shadow Agents Platform Web Application",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "next": "^14.0.0",
    "typescript": "^5.3.0",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "@headlessui/react": "^1.7.17",
    "@heroicons/react": "^2.1.1",
    "axios": "^1.6.2",
    "classnames": "^2.3.2",
    "react-hook-form": "^7.49.2",
    "react-hot-toast": "^2.4.1",
    "swr": "^2.2.4"
  },
  "devDependencies": {
    "@types/node": "^20.10.5",
    "@types/react": "^18.2.45",
    "@types/react-dom": "^18.2.18",
    "eslint": "^8.56.0",
    "eslint-config-next": "^14.0.4"
  }
}
```

#### 1.2 Tailwind CSS é…ç½®

**`web/tailwind.config.js`**
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        // è‡ªå®šä¹‰ä¸»é¢˜è‰²ï¼ˆå¯è½»æ¾æ›¿æ¢ï¼‰
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          200: '#bae6fd',
          300: '#7dd3fc',
          400: '#38bdf8',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
          800: '#075985',
          900: '#0c4a6e',
        },
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif'],
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
}
```

#### 1.3 TypeScript é…ç½®å·²åœ¨æ­¥éª¤2å®Œæˆ

#### 1.4 ç¯å¢ƒå˜é‡é…ç½®

**`web/.env.example`**
```env
# API åœ°å€
NEXT_PUBLIC_API_URL=http://localhost:5001

# åº”ç”¨åç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
NEXT_PUBLIC_APP_NAME=Shadow Agents Platform

# åº”ç”¨æè¿°
NEXT_PUBLIC_APP_DESCRIPTION=AIåº”ç”¨å¼€å‘å¹³å°
```

---

### æ­¥éª¤ 2ï¼šåˆ›å»ºåŸºç¡€ç»„ä»¶åº“

#### 2.1 æŒ‰é’®ç»„ä»¶

**`web/components/base/Button.tsx`**
```typescript
/**
 * æŒ‰é’®ç»„ä»¶
 * æä¾›ç»Ÿä¸€çš„æŒ‰é’®æ ·å¼å’Œäº¤äº’
 */
import React from 'react'
import classNames from 'classnames'

interface ButtonProps {
  /** æŒ‰é’®æ–‡æœ¬ */
  children: React.ReactNode
  /** æŒ‰é’®ç±»å‹ */
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger'
  /** æŒ‰é’®å¤§å° */
  size?: 'sm' | 'md' | 'lg'
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
  /** æ˜¯å¦åŠ è½½ä¸­ */
  loading?: boolean
  /** ç‚¹å‡»äº‹ä»¶ */
  onClick?: () => void
  /** æŒ‰é’®ç±»å‹ï¼ˆHTMLï¼‰ */
  type?: 'button' | 'submit' | 'reset'
  /** è‡ªå®šä¹‰ç±»å */
  className?: string
}

export const Button: React.FC<ButtonProps> = ({
  children,
  variant = 'primary',
  size = 'md',
  disabled = false,
  loading = false,
  onClick,
  type = 'button',
  className,
}) => {
  const baseStyles = 'inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2'
  
  const variantStyles = {
    primary: 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500',
    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500',
    outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500',
    ghost: 'text-gray-700 hover:bg-gray-100 focus:ring-gray-500',
    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
  }
  
  const sizeStyles = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-base',
    lg: 'px-6 py-3 text-lg',
  }
  
  const disabledStyles = 'opacity-50 cursor-not-allowed'
  
  return (
    <button
      type={type}
      onClick={onClick}
      disabled={disabled || loading}
      className={classNames(
        baseStyles,
        variantStyles[variant],
        sizeStyles[size],
        (disabled || loading) && disabledStyles,
        className
      )}
    >
      {loading && (
        <svg className="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
          <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
          <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
        </svg>
      )}
      {children}
    </button>
  )
}
```

#### 2.2 è¾“å…¥æ¡†ç»„ä»¶

**`web/components/base/Input.tsx`**
```typescript
/**
 * è¾“å…¥æ¡†ç»„ä»¶
 * æä¾›ç»Ÿä¸€çš„è¾“å…¥æ¡†æ ·å¼
 */
import React from 'react'
import classNames from 'classnames'

interface InputProps {
  /** æ ‡ç­¾æ–‡æœ¬ */
  label?: string
  /** è¾“å…¥æ¡†ç±»å‹ */
  type?: 'text' | 'email' | 'password' | 'number'
  /** å ä½ç¬¦ */
  placeholder?: string
  /** è¾“å…¥å€¼ */
  value: string
  /** å€¼å˜åŒ–å›è°ƒ */
  onChange: (value: string) => void
  /** æ˜¯å¦å¿…å¡« */
  required?: boolean
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
  /** é”™è¯¯ä¿¡æ¯ */
  error?: string
  /** è‡ªå®šä¹‰ç±»å */
  className?: string
}

export const Input: React.FC<InputProps> = ({
  label,
  type = 'text',
  placeholder,
  value,
  onChange,
  required = false,
  disabled = false,
  error,
  className,
}) => {
  return (
    <div className={className}>
      {label && (
        <label className="block text-sm font-medium text-gray-700 mb-1">
          {label}
          {required && <span className="text-red-500 ml-1">*</span>}
        </label>
      )}
      <input
        type={type}
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        required={required}
        disabled={disabled}
        className={classNames(
          'block w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors',
          error
            ? 'border-red-300 text-red-900 placeholder-red-300 focus:border-red-500'
            : 'border-gray-300 focus:border-primary-500',
          disabled && 'bg-gray-50 cursor-not-allowed'
        )}
      />
      {error && (
        <p className="mt-1 text-sm text-red-600">{error}</p>
      )}
    </div>
  )
}
```

#### 2.3 å¡ç‰‡ç»„ä»¶

**`web/components/base/Card.tsx`**
```typescript
/**
 * å¡ç‰‡ç»„ä»¶
 * ç”¨äºå†…å®¹å®¹å™¨
 */
import React from 'react'
import classNames from 'classnames'

interface CardProps {
  /** å¡ç‰‡å†…å®¹ */
  children: React.ReactNode
  /** å¡ç‰‡æ ‡é¢˜ */
  title?: string
  /** æ˜¯å¦æœ‰è¾¹æ¡† */
  bordered?: boolean
  /** æ˜¯å¦æœ‰é˜´å½± */
  shadow?: boolean
  /** å†…è¾¹è· */
  padding?: 'none' | 'sm' | 'md' | 'lg'
  /** è‡ªå®šä¹‰ç±»å */
  className?: string
}

export const Card: React.FC<CardProps> = ({
  children,
  title,
  bordered = true,
  shadow = true,
  padding = 'md',
  className,
}) => {
  const paddingStyles = {
    none: '',
    sm: 'p-3',
    md: 'p-4',
    lg: 'p-6',
  }
  
  return (
    <div
      className={classNames(
        'bg-white rounded-lg',
        bordered && 'border border-gray-200',
        shadow && 'shadow-sm',
        paddingStyles[padding],
        className
      )}
    >
      {title && (
        <h3 className="text-lg font-semibold text-gray-900 mb-4">{title}</h3>
      )}
      {children}
    </div>
  )
}
```

---

### æ­¥éª¤ 3ï¼šåˆ›å»º API æœåŠ¡å±‚

#### 3.1 HTTP è¯·æ±‚å·¥å…·

**`web/utils/request.ts`**
```typescript
/**
 * HTTP è¯·æ±‚å·¥å…·
 * å°è£… axiosï¼Œæä¾›ç»Ÿä¸€çš„è¯·æ±‚å¤„ç†
 */
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios'
import toast from 'react-hot-toast'

/** API å“åº”æ ¼å¼ */
interface ApiResponse<T = any> {
  success: boolean
  message: string
  data?: T
}

/** åˆ›å»º axios å®ä¾‹ */
const instance: AxiosInstance = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
})

/** è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ  Token */
instance.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('access_token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

/** å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€é”™è¯¯å¤„ç† */
instance.interceptors.response.use(
  (response: AxiosResponse<ApiResponse>) => {
    return response
  },
  (error) => {
    if (error.response) {
      const { status, data } = error.response
      
      // Token è¿‡æœŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      if (status === 401) {
        localStorage.removeItem('access_token')
        window.location.href = '/signin'
        toast.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')
      } else {
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        const message = data?.message || 'è¯·æ±‚å¤±è´¥'
        toast.error(message)
      }
    } else {
      toast.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥')
    }
    
    return Promise.reject(error)
  }
)

/** è¯·æ±‚æ–¹æ³•å°è£… */
export const request = {
  get<T = any>(url: string, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {
    return instance.get(url, config).then(res => res.data)
  },
  
  post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {
    return instance.post(url, data, config).then(res => res.data)
  },
  
  put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {
    return instance.put(url, data, config).then(res => res.data)
  },
  
  delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {
    return instance.delete(url, config).then(res => res.data)
  },
}
```

#### 3.2 è®¤è¯ API æœåŠ¡

**`web/service/auth.ts`**
```typescript
/**
 * è®¤è¯ API æœåŠ¡
 */
import { request } from '@/utils/request'

/** ç™»å½•è¯·æ±‚å‚æ•° */
export interface LoginParams {
  email: string
  password: string
}

/** ç™»å½•å“åº”æ•°æ® */
export interface LoginResponse {
  access_token: string
  refresh_token: string
  expires_in: number
}

/** æ³¨å†Œè¯·æ±‚å‚æ•° */
export interface RegisterParams {
  email: string
  name: string
  password: string
}

/** ç”¨æˆ·ä¿¡æ¯ */
export interface UserInfo {
  id: string
  email: string
  name: string
  avatar?: string
  role: string
}

/** è®¤è¯æœåŠ¡ */
export const authService = {
  /**
   * ç”¨æˆ·ç™»å½•
   */
  login(params: LoginParams) {
    return request.post<LoginResponse>('/api/console/auth/login', params)
  },
  
  /**
   * ç”¨æˆ·æ³¨å†Œ
   */
  register(params: RegisterParams) {
    return request.post<UserInfo>('/api/console/auth/register', params)
  },
  
  /**
   * é€€å‡ºç™»å½•
   */
  logout() {
    localStorage.removeItem('access_token')
    localStorage.removeItem('refresh_token')
    window.location.href = '/signin'
  },
  
  /**
   * è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
   */
  getCurrentUser() {
    return request.get<UserInfo>('/api/console/auth/me')
  },
}
```

#### 3.3 åº”ç”¨ API æœåŠ¡

**`web/service/app.ts`**
```typescript
/**
 * åº”ç”¨ API æœåŠ¡
 */
import { request } from '@/utils/request'

/** åº”ç”¨ä¿¡æ¯ */
export interface App {
  id: string
  name: string
  description?: string
  mode: 'chat' | 'completion' | 'agent' | 'workflow'
  icon?: string
  icon_background?: string
  status: 'draft' | 'published' | 'archived'
  created_at: string
  updated_at: string
}

/** åˆ›å»ºåº”ç”¨å‚æ•° */
export interface CreateAppParams {
  name: string
  mode: App['mode']
  description?: string
  icon?: string
}

/** åº”ç”¨æœåŠ¡ */
export const appService = {
  /**
   * è·å–åº”ç”¨åˆ—è¡¨
   */
  list(status?: App['status']) {
    const params = status ? { status } : {}
    return request.get<App[]>('/api/console/apps', { params })
  },
  
  /**
   * è·å–åº”ç”¨è¯¦æƒ…
   */
  get(appId: string) {
    return request.get<App>(`/api/console/apps/${appId}`)
  },
  
  /**
   * åˆ›å»ºåº”ç”¨
   */
  create(params: CreateAppParams) {
    return request.post<App>('/api/console/apps', params)
  },
  
  /**
   * æ›´æ–°åº”ç”¨
   */
  update(appId: string, params: Partial<CreateAppParams>) {
    return request.put<App>(`/api/console/apps/${appId}`, params)
  },
  
  /**
   * åˆ é™¤åº”ç”¨
   */
  delete(appId: string) {
    return request.delete(`/api/console/apps/${appId}`)
  },
}
```

---

### æ­¥éª¤ 4ï¼šåˆ›å»ºé¡µé¢

#### 4.1 ç™»å½•é¡µé¢

**`web/app/(auth)/signin/page.tsx`**
```typescript
/**
 * ç™»å½•é¡µé¢
 */
'use client'

import React, { useState } from 'react'
import { useRouter } from 'next/navigation'
import Link from 'next/link'
import { Input } from '@/components/base/Input'
import { Button } from '@/components/base/Button'
import { Card } from '@/components/base/Card'
import { authService } from '@/service/auth'
import toast from 'react-hot-toast'

export default function SignInPage() {
  const router = useRouter()
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [loading, setLoading] = useState(false)
  
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    // è¡¨å•éªŒè¯
    if (!email || !password) {
      toast.error('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ')
      return
    }
    
    setLoading(true)
    
    try {
      const response = await authService.login({ email, password })
      
      if (response.success && response.data) {
        // ä¿å­˜ Token
        localStorage.setItem('access_token', response.data.access_token)
        localStorage.setItem('refresh_token', response.data.refresh_token)
        
        toast.success('ç™»å½•æˆåŠŸ')
        router.push('/apps')
      }
    } catch (error) {
      // é”™è¯¯å·²åœ¨æ‹¦æˆªå™¨ä¸­å¤„ç†
    } finally {
      setLoading(false)
    }
  }
  
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8">
        {/* Logo å’Œæ ‡é¢˜ */}
        <div className="text-center">
          <h2 className="text-3xl font-bold text-gray-900">
            {process.env.NEXT_PUBLIC_APP_NAME}
          </h2>
          <p className="mt-2 text-sm text-gray-600">
            ç™»å½•æ‚¨çš„è´¦æˆ·
          </p>
        </div>
        
        {/* ç™»å½•è¡¨å• */}
        <Card className="mt-8">
          <form onSubmit={handleSubmit} className="space-y-6">
            <Input
              label="é‚®ç®±åœ°å€"
              type="email"
              placeholder="your@email.com"
              value={email}
              onChange={setEmail}
              required
            />
            
            <Input
              label="å¯†ç "
              type="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              value={password}
              onChange={setPassword}
              required
            />
            
            <Button
              type="submit"
              variant="primary"
              className="w-full"
              loading={loading}
            >
              ç™»å½•
            </Button>
          </form>
          
          <div className="mt-4 text-center text-sm">
            <span className="text-gray-600">è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ</span>
            {' '}
            <Link href="/signup" className="text-primary-600 hover:text-primary-700 font-medium">
              ç«‹å³æ³¨å†Œ
            </Link>
          </div>
        </Card>
      </div>
    </div>
  )
}
```

#### 4.2 åº”ç”¨åˆ—è¡¨é¡µé¢

**`web/app/(commonLayout)/apps/page.tsx`**
```typescript
/**
 * åº”ç”¨åˆ—è¡¨é¡µé¢
 */
'use client'

import React, { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { Button } from '@/components/base/Button'
import { Card } from '@/components/base/Card'
import { appService, App } from '@/service/app'
import toast from 'react-hot-toast'

export default function AppsPage() {
  const router = useRouter()
  const [apps, setApps] = useState<App[]>([])
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    loadApps()
  }, [])
  
  const loadApps = async () => {
    try {
      const response = await appService.list()
      if (response.success && response.data) {
        setApps(response.data)
      }
    } catch (error) {
      // é”™è¯¯å·²å¤„ç†
    } finally {
      setLoading(false)
    }
  }
  
  const handleCreateApp = () => {
    router.push('/apps/new')
  }
  
  const handleAppClick = (appId: string) => {
    router.push(`/apps/${appId}`)
  }
  
  if (loading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-gray-500">åŠ è½½ä¸­...</div>
      </div>
    )
  }
  
  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* é¡µé¢å¤´éƒ¨ */}
      <div className="flex justify-between items-center mb-6">
        <div>
          <h1 className="text-2xl font-bold text-gray-900">æˆ‘çš„åº”ç”¨</h1>
          <p className="mt-1 text-sm text-gray-600">
            åˆ›å»ºå’Œç®¡ç†æ‚¨çš„ AI åº”ç”¨
          </p>
        </div>
        <Button onClick={handleCreateApp}>
          + åˆ›å»ºåº”ç”¨
        </Button>
      </div>
      
      {/* åº”ç”¨åˆ—è¡¨ */}
      {apps.length === 0 ? (
        <Card className="text-center py-12">
          <p className="text-gray-500 mb-4">è¿˜æ²¡æœ‰åº”ç”¨</p>
          <Button onClick={handleCreateApp}>
            åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨
          </Button>
        </Card>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {apps.map((app) => (
            <Card
              key={app.id}
              className="cursor-pointer hover:shadow-md transition-shadow"
              onClick={() => handleAppClick(app.id)}
            >
              <div className="flex items-start space-x-3">
                {/* åº”ç”¨å›¾æ ‡ */}
                <div
                  className="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center text-white text-xl font-bold"
                  style={{ backgroundColor: app.icon_background || '#6366f1' }}
                >
                  {app.icon || app.name.charAt(0)}
                </div>
                
                {/* åº”ç”¨ä¿¡æ¯ */}
                <div className="flex-1 min-w-0">
                  <h3 className="text-lg font-semibold text-gray-900 truncate">
                    {app.name}
                  </h3>
                  <p className="text-sm text-gray-500 line-clamp-2">
                    {app.description || 'æš‚æ— æè¿°'}
                  </p>
                  <div className="mt-2 flex items-center space-x-2">
                    <span className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                      {app.mode}
                    </span>
                    <span className="text-xs text-gray-400">
                      {new Date(app.updated_at).toLocaleDateString()}
                    </span>
                  </div>
                </div>
              </div>
            </Card>
          ))}
        </div>
      )}
    </div>
  )
}
```

---

### æ­¥éª¤ 5ï¼šåˆ›å»ºå¸ƒå±€ç»„ä»¶

#### 5.1 è®¤è¯å¸ƒå±€

**`web/app/(auth)/layout.tsx`**
```typescript
/**
 * è®¤è¯é¡µé¢å¸ƒå±€
 * ç”¨äºç™»å½•ã€æ³¨å†Œç­‰é¡µé¢
 */
import React from 'react'

export default function AuthLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="min-h-screen bg-gray-50">
      {children}
    </div>
  )
}
```

#### 5.2 é€šç”¨å¸ƒå±€ï¼ˆå¸¦ä¾§è¾¹æ ï¼‰

**`web/app/(commonLayout)/layout.tsx`**
```typescript
/**
 * é€šç”¨å¸ƒå±€
 * åŒ…å«é¡¶éƒ¨å¯¼èˆªæ å’Œä¾§è¾¹æ 
 */
'use client'

import React, { useState } from 'react'
import Link from 'next/link'
import { usePathname, useRouter } from 'next/navigation'
import { authService } from '@/service/auth'
import classNames from 'classnames'

export default function CommonLayout({
  children,
}: {
  children: React.ReactNode
}) {
  const pathname = usePathname()
  const router = useRouter()
  const [sidebarOpen, setSidebarOpen] = useState(true)
  
  const navigation = [
    { name: 'åº”ç”¨', href: '/apps', icon: 'ğŸš€' },
    { name: 'æ•°æ®é›†', href: '/datasets', icon: 'ğŸ“š' },
    { name: 'å·¥ä½œç©ºé—´', href: '/workspace', icon: 'âš™ï¸' },
  ]
  
  const handleLogout = () => {
    authService.logout()
  }
  
  return (
    <div className="min-h-screen bg-gray-50">
      {/* ä¾§è¾¹æ  */}
      <div
        className={classNames(
          'fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-200 ease-in-out',
          sidebarOpen ? 'translate-x-0' : '-translate-x-full'
        )}
      >
        {/* Logo */}
        <div className="h-16 flex items-center px-6 border-b border-gray-200">
          <h1 className="text-xl font-bold text-gray-900">
            {process.env.NEXT_PUBLIC_APP_NAME}
          </h1>
        </div>
        
        {/* å¯¼èˆªèœå• */}
        <nav className="mt-6 px-3">
          {navigation.map((item) => {
            const isActive = pathname.startsWith(item.href)
            return (
              <Link
                key={item.name}
                href={item.href}
                className={classNames(
                  'flex items-center px-3 py-2 mb-1 rounded-lg text-sm font-medium transition-colors',
                  isActive
                    ? 'bg-primary-50 text-primary-600'
                    : 'text-gray-700 hover:bg-gray-100'
                )}
              >
                <span className="mr-3 text-lg">{item.icon}</span>
                {item.name}
              </Link>
            )
          })}
        </nav>
        
        {/* åº•éƒ¨ç”¨æˆ·ä¿¡æ¯ */}
        <div className="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
          <button
            onClick={handleLogout}
            className="w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
          >
            é€€å‡ºç™»å½•
          </button>
        </div>
      </div>
      
      {/* ä¸»å†…å®¹åŒº */}
      <div className={classNames(
        'transition-all duration-200 ease-in-out',
        sidebarOpen ? 'ml-64' : 'ml-0'
      )}>
        {/* é¡¶éƒ¨æ  */}
        <header className="h-16 bg-white border-b border-gray-200 flex items-center px-6">
          <button
            onClick={() => setSidebarOpen(!sidebarOpen)}
            className="text-gray-500 hover:text-gray-700"
          >
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </header>
        
        {/* é¡µé¢å†…å®¹ */}
        <main className="p-6">
          {children}
        </main>
      </div>
    </div>
  )
}
```

---

## å“ç‰Œè‡ªå®šä¹‰æŒ‡å—

### æ›¿æ¢ Logo
1. å°† Logo æ–‡ä»¶æ”¾åˆ° `public/logo/` ç›®å½•
2. åœ¨å¸ƒå±€ç»„ä»¶ä¸­å¼•ç”¨ï¼š
```typescript
import Image from 'next/image'

<Image src="/logo/your-logo.png" alt="Logo" width={120} height={40} />
```

### è‡ªå®šä¹‰ä¸»é¢˜è‰²
ä¿®æ”¹ `tailwind.config.js` ä¸­çš„ `primary` é¢œè‰²é…ç½®

### ä¿®æ”¹åº”ç”¨åç§°
åœ¨ `.env` æ–‡ä»¶ä¸­ä¿®æ”¹ï¼š
```env
NEXT_PUBLIC_APP_NAME=æ‚¨çš„åº”ç”¨åç§°
```

---

## å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ TypeScript
- [ ] æ³¨é‡Šä½¿ç”¨ä¸­æ–‡
- [ ] å“åº”å¼è®¾è®¡å®ç°
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] Loading çŠ¶æ€å±•ç¤º
- [ ] æ— éšœç¢æ”¯æŒï¼ˆa11yï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ï¼‰


## ä¸‹ä¸€æ­¥

å®Œæˆå‰ç«¯å¼€å‘åï¼Œè¿›å…¥ï¼š
ğŸ‘‰ **é˜¶æ®µäº”ï¼šç®€åŒ–å¹¶ä¼˜åŒ– Docker éƒ¨ç½²é…ç½®**
