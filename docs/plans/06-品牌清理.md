# 阶段六：移除作者信息和品牌元素

## 目标
彻底清除所有文件中的 Dify 作者信息和品牌元素，提供品牌元素自定义的完整方案和文档。

---

## 总体思路

### 清理范围
1. **代码文件**：移除所有 AUTHORS、Copyright 等信息
2. **配置文件**：替换项目名称和标识
3. **文档文件**：重写所有 README 和文档
4. **品牌资源**：移除 Logo、图标等视觉元素
5. **依赖配置**：更新包名和项目元数据

### 替换策略
- 使用查找替换工具批量处理
- 建立品牌元素配置化机制
- 提供详细的自定义指南

---

## 详细执行步骤

### 步骤 1：清理代码文件头部信息

#### 1.1 识别需要清理的内容

需要移除的信息类型：
- `# Author: xxx`
- `# Copyright (c) xxx`
- `# Created by: xxx`
- `@author xxx`
- LICENSE 文件中的原作者信息
- CONTRIBUTORS 文件

#### 1.2 批量清理脚本

**`scripts/cleanup/remove_authors.py`**
```python
#!/usr/bin/env python3
"""
清理代码文件中的作者信息
移除所有 Author、Copyright 等标记
"""
import os
import re
from pathlib import Path

# 需要处理的文件扩展名
EXTENSIONS = ['.py', '.js', '.ts', '.tsx', '.jsx', '.md', '.yml', '.yaml', '.json']

# 需要移除的模式
PATTERNS_TO_REMOVE = [
    r'#\s*[Aa]uthor:?\s*.*\n',
    r'#\s*[Cc]opyright.*\n',
    r'#\s*[Cc]reated\s+by:?\s*.*\n',
    r'//\s*[Aa]uthor:?\s*.*\n',
    r'//\s*[Cc]opyright.*\n',
    r'/\*\*?\s*@author\s+.*?\*/',
    r'<!--\s*[Aa]uthor:?\s*.*?-->',
]

def should_process_file(filepath: Path) -> bool:
    """判断是否需要处理该文件"""
    if filepath.suffix not in EXTENSIONS:
        return False
    
    # 排除特定目录
    exclude_dirs = {'node_modules', '.git', '__pycache__', 'venv', '.next'}
    return not any(part in exclude_dirs for part in filepath.parts)

def clean_file(filepath: Path) -> bool:
    """清理单个文件中的作者信息"""
    try:
        content = filepath.read_text(encoding='utf-8')
        original_content = content
        
        # 应用所有清理模式
        for pattern in PATTERNS_TO_REMOVE:
            content = re.sub(pattern, '', content, flags=re.MULTILINE | re.DOTALL)
        
        # 如果内容有变化，写回文件
        if content != original_content:
            filepath.write_text(content, encoding='utf-8')
            return True
            
    except Exception as e:
        print(f"处理文件出错 {filepath}: {str(e)}")
    
    return False

def main():
    """主函数"""
    root_dir = Path(__file__).parent.parent.parent
    
    print("开始清理作者信息...")
    print(f"根目录: {root_dir}")
    print()
    
    cleaned_files = []
    
    # 遍历所有文件
    for filepath in root_dir.rglob('*'):
        if filepath.is_file() and should_process_file(filepath):
            if clean_file(filepath):
                cleaned_files.append(filepath)
                print(f"✓ 已清理: {filepath.relative_to(root_dir)}")
    
    print()
    print(f"完成！共清理 {len(cleaned_files)} 个文件")
    
    # 输出清理列表
    if cleaned_files:
        print("\n已清理的文件列表:")
        for filepath in cleaned_files:
            print(f"  - {filepath.relative_to(root_dir)}")

if __name__ == '__main__':
    main()
```

#### 1.3 运行清理脚本

```bash
python scripts/cleanup/remove_authors.py
```

---

### 步骤 2：替换项目名称和标识

#### 2.1 全局查找替换清单

| 原内容 | 替换为 | 位置 |
|--------|--------|------|
| `dify` | `shadow-agents` | 所有文件 |
| `Dify` | `Shadow Agents Platform` | 显示名称 |
| `langgenius` | `your-org` | 包名、URL |
| `dify.ai` | `your-domain.com` | 链接 |

#### 2.2 批量替换脚本

**`scripts/cleanup/replace_branding.sh`**
```bash
#!/bin/bash

# ====================================
# 品牌元素替换脚本
# ====================================

set -e

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"
cd "$ROOT_DIR"

echo "开始替换品牌元素..."
echo "根目录: $ROOT_DIR"
echo ""

# 定义替换规则
declare -A REPLACEMENTS=(
    ["dify"]="shadow-agents"
    ["Dify"]="Shadow Agents Platform"
    ["DIFY"]="SHADOW_AGENTS"
    ["langgenius"]="your-org"
    ["dify\.ai"]="your-domain.com"
)

# 需要处理的文件类型
FILE_PATTERNS="*.py *.js *.ts *.tsx *.jsx *.json *.yml *.yaml *.md *.txt *.toml"

# 执行替换
for old_text in "${!REPLACEMENTS[@]}"; do
    new_text="${REPLACEMENTS[$old_text]}"
    echo "替换: '$old_text' -> '$new_text'"
    
    # 使用 find 和 sed 进行替换（排除特定目录）
    find . \
        -type f \
        \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.tsx" \
        -o -name "*.jsx" -o -name "*.json" -o -name "*.yml" -o -name "*.yaml" \
        -o -name "*.md" -o -name "*.txt" -o -name "*.toml" \) \
        ! -path "*/node_modules/*" \
        ! -path "*/.git/*" \
        ! -path "*/__pycache__/*" \
        ! -path "*/.next/*" \
        ! -path "*/reference_repos/*" \
        -exec sed -i.bak "s/$old_text/$new_text/g" {} \;
    
    # 删除备份文件
    find . -name "*.bak" -type f -delete
done

echo ""
echo "✓ 品牌元素替换完成"
```

#### 2.3 运行替换脚本

```bash
chmod +x scripts/cleanup/replace_branding.sh
./scripts/cleanup/replace_branding.sh
```

---

### 步骤 3：移除和替换视觉元素

#### 3.1 清理 Logo 和图标

```bash
# 创建新的品牌资源目录
mkdir -p web/public/branding

# 移除原有 Logo
rm -f web/public/logo/*
rm -f web/public/icons/dify-*

# 创建占位符说明
cat > web/public/branding/README.md << 'EOF'
# 品牌资源目录

请将您的品牌资源放置在此目录：

## Logo
- `logo.png` - 主 Logo (建议尺寸: 200x60px)
- `logo-dark.png` - 深色主题 Logo
- `logo-icon.png` - 图标版本 (建议尺寸: 64x64px)

## Favicon
- `favicon.ico` - 浏览器图标 (16x16, 32x32, 48x48)
- `favicon-16x16.png`
- `favicon-32x32.png`

## 社交媒体
- `og-image.png` - Open Graph 图片 (1200x630px)
- `twitter-card.png` - Twitter 卡片图片 (1200x675px)

## 颜色规范

编辑 `web/config/branding.ts` 文件来配置品牌颜色。
EOF
```

#### 3.2 创建品牌配置文件

**`web/config/branding.ts`**
```typescript
/**
 * 品牌配置
 * 集中管理所有品牌相关的配置
 */

export const branding = {
  // 应用名称
  appName: process.env.NEXT_PUBLIC_APP_NAME || 'Shadow Agents Platform',
  
  // 应用描述
  appDescription: process.env.NEXT_PUBLIC_APP_DESCRIPTION || 'AI 应用开发平台',
  
  // Logo 路径
  logo: {
    light: '/branding/logo.png',
    dark: '/branding/logo-dark.png',
    icon: '/branding/logo-icon.png',
  },
  
  // Favicon
  favicon: '/branding/favicon.ico',
  
  // 主题色
  colors: {
    primary: '#0ea5e9',      // 主色调
    secondary: '#64748b',    // 次要色
    success: '#10b981',      // 成功色
    warning: '#f59e0b',      // 警告色
    danger: '#ef4444',       // 危险色
  },
  
  // 社交媒体链接（可选）
  social: {
    github: '',
    twitter: '',
    discord: '',
  },
  
  // 支持链接（可选）
  support: {
    docs: '/docs',
    community: '',
    email: 'support@example.com',
  },
  
  // 版权信息
  copyright: `© ${new Date().getFullYear()} Your Company. All rights reserved.`,
}
```

---

### 步骤 4：更新文档

#### 4.1 重写 README

**`README.md`**
```markdown
# Shadow Agents Platform

一个强大的开源 AI 应用开发平台

---

## 📖 简介

Shadow Agents Platform 是一个完全开源的 AI 应用开发平台，帮助开发者和企业快速构建、部署和管理 AI 应用。

### 核心特性

- 🤖 **多种应用类型** - 支持聊天助手、文本生成、Agent、工作流
- 🎨 **可视化工作流** - 无代码构建复杂的 AI 工作流
- 📚 **知识库管理** - RAG 检索增强生成支持
- 🔧 **完全可定制** - 支持自定义品牌和主题
- 🐳 **简化部署** - 一键 Docker 部署
- 🌍 **多语言支持** - 内置中英文支持

---

## 🚀 快速开始

### 系统要求

- Docker 20.10+
- Docker Compose 2.0+
- 4GB+ RAM
- 20GB+ 磁盘空间

### 一键部署

```bash
# 克隆仓库
git clone https://github.com/your-org/shadow-agents-platform.git
cd shadow-agents-platform

# 配置环境变量
cd docker
cp .env.example .env

# 启动服务
./start.sh
```

访问 http://localhost 开始使用。

详细部署说明请查看 [部署指南](docs/guides/deployment.md)。

---

## 📚 文档

- [架构设计](docs/architecture/) - 了解系统架构
- [部署指南](docs/guides/deployment.md) - 部署和运维
- [开发指南](docs/guides/development.md) - 本地开发
- [品牌定制](docs/guides/branding.md) - 自定义品牌
- [API 文档](docs/api-reference/) - API 接口说明

---

## 🎨 品牌定制

Shadow Agents Platform 支持完全自定义品牌元素：

1. 替换 Logo 和图标
2. 自定义主题颜色
3. 修改应用名称
4. 配置域名和链接

详见 [品牌定制指南](docs/guides/branding.md)。

---

## 💻 技术栈

### 后端
- Python 3.11+
- Flask - Web 框架
- SQLAlchemy - ORM
- Celery - 异步任务
- PostgreSQL - 数据库
- Redis - 缓存

### 前端
- React 18+
- Next.js 14+ - React 框架
- TypeScript - 类型安全
- Tailwind CSS - 样式框架

### 基础设施
- Docker - 容器化
- Nginx - 反向代理

---

## 🤝 贡献

欢迎贡献代码！请查看 [贡献指南](CONTRIBUTING.md)。

### 开发流程

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 创建 Pull Request

---

## 📄 许可证

本项目采用 [MIT License](LICENSE) 开源协议。

---

## 🙏 致谢

感谢所有贡献者的付出！

---

## 📞 联系我们

- 文档: [https://docs.your-domain.com](https://docs.your-domain.com)
- 问题反馈: [GitHub Issues](https://github.com/your-org/shadow-agents-platform/issues)
- 社区讨论: [GitHub Discussions](https://github.com/your-org/shadow-agents-platform/discussions)
- 邮箱: support@your-domain.com

---

**⭐ 如果这个项目对您有帮助，请给我们一个 Star！**
```

#### 4.2 创建品牌定制指南

**`docs/guides/branding.md`**
````markdown
# 品牌定制指南

Shadow Agents Platform 支持完全自定义品牌元素，您可以轻松替换为自己的品牌。

---

## 基础配置

### 1. 修改应用名称

编辑 `docker/.env` 文件：

```env
APP_NAME=您的应用名称
```

或在前端单独配置 `web/.env.local`：

```env
NEXT_PUBLIC_APP_NAME=您的应用名称
NEXT_PUBLIC_APP_DESCRIPTION=您的应用描述
```

### 2. 修改品牌配置

编辑 `web/config/branding.ts`：

```typescript
export const branding = {
  appName: '您的应用名称',
  appDescription: '您的应用描述',
  // ... 其他配置
}
```

---

## 视觉元素

### Logo 和图标

#### 1. 准备资源文件

按以下规格准备品牌资源：

| 文件名 | 尺寸 | 用途 |
|--------|------|------|
| logo.png | 200x60px | 浅色主题 Logo |
| logo-dark.png | 200x60px | 深色主题 Logo |
| logo-icon.png | 64x64px | 图标版本 |
| favicon.ico | 16/32/48px | 浏览器图标 |
| og-image.png | 1200x630px | 社交媒体分享图 |

#### 2. 放置文件

将准备好的文件放到 `web/public/branding/` 目录：

```
web/public/branding/
├── logo.png
├── logo-dark.png
├── logo-icon.png
├── favicon.ico
└── og-image.png
```

#### 3. 更新引用

编辑 `web/config/branding.ts`，确保路径正确：

```typescript
logo: {
  light: '/branding/logo.png',
  dark: '/branding/logo-dark.png',
  icon: '/branding/logo-icon.png',
},
favicon: '/branding/favicon.ico',
```

---

## 主题颜色

### 1. 使用品牌配置

编辑 `web/config/branding.ts`：

```typescript
colors: {
  primary: '#yourColor',    // 主色调
  secondary: '#yourColor',  // 次要色
  success: '#yourColor',    // 成功色
  warning: '#yourColor',    // 警告色
  danger: '#yourColor',     // 危险色
},
```

### 2. 更新 Tailwind 配置

编辑 `web/tailwind.config.js`：

```javascript
theme: {
  extend: {
    colors: {
      primary: {
        50: '#yourColor',
        100: '#yourColor',
        // ... 其他色阶
        900: '#yourColor',
      },
    },
  },
},
```

💡 **提示**: 使用在线工具生成完整色阶，如 [Tailwind Color Generator](https://uicolors.app/)

---

## 文案和链接

### 1. 版权信息

编辑 `web/config/branding.ts`：

```typescript
copyright: `© ${new Date().getFullYear()} 您的公司名. 保留所有权利.`,
```

### 2. 社交媒体链接

```typescript
social: {
  github: 'https://github.com/your-org',
  twitter: 'https://twitter.com/your-account',
  discord: 'https://discord.gg/your-invite',
},
```

### 3. 支持链接

```typescript
support: {
  docs: 'https://docs.your-domain.com',
  community: 'https://community.your-domain.com',
  email: 'support@your-domain.com',
},
```

---

## 域名配置

### 1. 后端 API 地址

编辑 `web/.env.local`：

```env
NEXT_PUBLIC_API_URL=https://api.your-domain.com
```

### 2. Nginx 配置

编辑 `docker/nginx/conf.d/default.conf`，添加域名：

```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;
    # ... 其他配置
}
```

### 3. SSL 证书（生产环境）

```bash
# 使用 Let's Encrypt
certbot certonly --standalone -d your-domain.com -d www.your-domain.com
```

更新 Nginx 配置以支持 HTTPS。

---

## 邮件模板

### 自定义邮件模板

邮件模板位于 `api/templates/email/`：

```
api/templates/email/
├── welcome.html          # 欢迎邮件
├── reset_password.html   # 密码重置
└── notification.html     # 通知邮件
```

编辑这些模板，替换品牌元素和文案。

---

## 验证清单

完成品牌定制后，检查以下项目：

- [ ] 应用名称已更新（浏览器标题、页面显示）
- [ ] Logo 在所有页面正确显示
- [ ] Favicon 在浏览器标签显示
- [ ] 主题颜色应用正确
- [ ] 版权信息更新
- [ ] 社交媒体链接有效
- [ ] 邮件模板品牌一致
- [ ] 文档中的品牌信息更新

---

## 示例

### 完整的品牌配置示例

```typescript
// web/config/branding.ts
export const branding = {
  appName: 'Acme AI Platform',
  appDescription: '企业级 AI 应用开发平台',
  
  logo: {
    light: '/branding/acme-logo.png',
    dark: '/branding/acme-logo-dark.png',
    icon: '/branding/acme-icon.png',
  },
  
  favicon: '/branding/favicon.ico',
  
  colors: {
    primary: '#7c3aed',
    secondary: '#64748b',
    success: '#10b981',
    warning: '#f59e0b',
    danger: '#ef4444',
  },
  
  social: {
    github: 'https://github.com/acme',
    twitter: 'https://twitter.com/acme_ai',
    discord: '',
  },
  
  support: {
    docs: 'https://docs.acme.com',
    community: 'https://community.acme.com',
    email: 'support@acme.com',
  },
  
  copyright: `© ${new Date().getFullYear()} Acme Corporation. All rights reserved.`,
}
```

---

## 常见问题

### Q: Logo 不显示怎么办？

A: 检查以下几点：
1. 文件路径是否正确
2. 文件格式是否支持（PNG/SVG/JPEG）
3. 文件权限是否正确
4. 浏览器缓存是否清除

### Q: 颜色没有生效？

A: 确保：
1. Tailwind 配置已更新
2. 重新构建前端应用
3. 清除浏览器缓存

### Q: 如何批量替换文案？

A: 使用全局搜索替换工具，或运行提供的脚本：

```bash
./scripts/cleanup/replace_branding.sh
```

---

## 获取帮助

如有问题，请查看：
- [部署指南](deployment.md)
- [开发指南](development.md)
- [GitHub Issues](https://github.com/your-org/shadow-agents-platform/issues)

---
````

---

### 步骤 5：清理特定文件

#### 5.1 删除不需要的文件

```bash
# AUTHORS 文件
rm -f AUTHORS CONTRIBUTORS

# 原有的 README 翻译文件（如果不需要）
rm -rf README/

# 原有的贡献指南（需要重写）
rm -f CONTRIBUTING.md

# 原有的变更日志
rm -f CHANGELOG.md
```

#### 5.2 创建新的许可证文件

**`LICENSE`**
```
MIT License

Copyright (c) 2025 Your Organization

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## 验证检查清单

完成清理后，需要验证：

- [ ] 所有代码文件无作者信息
- [ ] 项目名称全局替换完成
- [ ] Logo 和图标已移除/替换
- [ ] README 和文档已重写
- [ ] LICENSE 文件已更新
- [ ] 包配置文件已更新
- [ ] 环境变量配置无原品牌信息
- [ ] 品牌定制指南完整
- [ ] 测试应用启动正常
- [ ] UI 界面无原品牌元素

---

## 预计时间

- 编写清理脚本：1 天
- 执行清理和替换：1 天
- 视觉元素处理：1 天
- 文档重写：2 天
- 验证和测试：1 天
- **总计**：约 1 周

---

## 下一步

完成品牌清理后，进入：
👉 **阶段七：创建中文文档和部署指南**
