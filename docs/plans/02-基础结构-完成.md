# Shadow Agents Platform - é˜¶æ®µäºŒå®Œæˆæ€»ç»“

## ğŸ“‹ ä»»åŠ¡å®Œæˆæƒ…å†µ

âœ… **æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼**

### ä»»åŠ¡ 1: åˆ›å»ºé¡¶å±‚ç›®å½•ç»“æ„ âœ…
- åˆ›å»ºäº† `api/`, `web/`, `docker/`, `scripts/` ç­‰é¡¶å±‚ç›®å½•
- æ·»åŠ äº† `.gitignore`, `.editorconfig`, `README.md`, `CHANGELOG.md`, `CONTRIBUTING.md`

### ä»»åŠ¡ 2: åˆ›å»ºåç«¯åŸºç¡€ç»“æ„ âœ…
- **ç›®å½•ç»“æ„**: å®Œæ•´çš„ Python åŒ…ç»“æ„
  - `configs/` - é…ç½®æ¨¡å—
  - `controllers/` - æ§åˆ¶å™¨ï¼ˆconsole å’Œ serviceï¼‰
  - `core/` - æ ¸å¿ƒé€»è¾‘ï¼ˆapp, workflow, rag, model_runtimeï¼‰
  - `models/` - æ•°æ®æ¨¡å‹
  - `services/` - ä¸šåŠ¡æœåŠ¡å±‚
  - `repositories/` - æ•°æ®è®¿é—®å±‚
  - `extensions/` - Flask æ‰©å±•
  - `libs/` - å·¥å…·åº“
  - `tasks/` - Celery ä»»åŠ¡
  - `migrations/` - æ•°æ®åº“è¿ç§»
  - `tests/` - æµ‹è¯•ä»£ç 

- **æ ¸å¿ƒæ–‡ä»¶**:
  - `pyproject.toml` - Python é¡¹ç›®é…ç½®å’Œä¾èµ–
  - `app.py` - Flask åº”ç”¨å…¥å£
  - `app_factory.py` - åº”ç”¨å·¥å‚æ¨¡å¼
  - `celery_app.py` - Celery ä»»åŠ¡é˜Ÿåˆ—
  - `gunicorn.conf.py` - Gunicorn é…ç½®
  - `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿
  - `Dockerfile` - Docker é•œåƒ
  - `README.md` - åç«¯æ–‡æ¡£

- **æ‰©å±•æ¨¡å—**:
  - `ext_database.py` - SQLAlchemy æ•°æ®åº“
  - `ext_redis.py` - Redis å®¢æˆ·ç«¯
  - `ext_storage.py` - æ–‡ä»¶å­˜å‚¨

- **å·¥å…·åº“**:
  - `errors.py` - API å¼‚å¸¸å¤„ç†

### ä»»åŠ¡ 3: åˆ›å»ºå‰ç«¯åŸºç¡€ç»“æ„ âœ…
- **ç›®å½•ç»“æ„**:
  - `app/` - Next.js App Router
    - `(auth)/` - è®¤è¯é¡µé¢ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
    - `(commonLayout)/` - ä¸»åº”ç”¨å¸ƒå±€
  - `components/` - React ç»„ä»¶
    - `base/` - åŸºç¡€ç»„ä»¶ï¼ˆsidebar ç­‰ï¼‰
  - `service/` - API æœåŠ¡å±‚
  - `types/` - TypeScript ç±»å‹
  - `utils/` - å·¥å…·å‡½æ•°
  - `styles/` - æ ·å¼æ–‡ä»¶

- **é…ç½®æ–‡ä»¶**:
  - `package.json` - é¡¹ç›®ä¾èµ–
  - `tsconfig.json` - TypeScript é…ç½®
  - `next.config.js` - Next.js é…ç½®
  - `tailwind.config.ts` - Tailwind CSS é…ç½®
  - `postcss.config.js` - PostCSS é…ç½®
  - `eslint.config.mjs` - ESLint é…ç½®
  - `.prettierrc` - Prettier é…ç½®
  - `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿
  - `Dockerfile` - Docker é•œåƒ
  - `README.md` - å‰ç«¯æ–‡æ¡£

- **æ ¸å¿ƒç»„ä»¶**:
  - `layout.tsx` - æ ¹å¸ƒå±€
  - `page.tsx` - é¦–é¡µ
  - `providers.tsx` - å…¨å±€ Providers
  - `sidebar.tsx` - ä¾§è¾¹æ å¯¼èˆª

- **æœåŠ¡å±‚**:
  - `api/base.ts` - HTTP å®¢æˆ·ç«¯åŸºç¡€é…ç½®
  - `auth/index.ts` - è®¤è¯ API

### ä»»åŠ¡ 4: åˆ›å»º Docker é…ç½® âœ…
- **æ ¸å¿ƒæ–‡ä»¶**:
  - `docker-compose.yml` - å®Œæ•´çš„æœåŠ¡ç¼–æ’é…ç½®
    - PostgreSQL 15 + pgvector
    - Redis 7
    - Milvus 2.4 (å« etcd å’Œ MinIO)
    - API (Flask)
    - Worker (Celery)
    - Beat (Celery)
    - Web (Next.js)
    - Nginx (åå‘ä»£ç†)
  
  - `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

- **æœåŠ¡é…ç½®**:
  - `nginx/nginx.conf` - Nginx ä¸»é…ç½®
  - `nginx/conf.d/default.conf` - ç«™ç‚¹é…ç½®
  - `postgres/init.sql` - PostgreSQL åˆå§‹åŒ–è„šæœ¬
  - `redis/redis.conf` - Redis é…ç½®
  
  - `README.md` - Docker éƒ¨ç½²æ–‡æ¡£

- **éƒ¨ç½²è„šæœ¬**:
  - `scripts/deployment/start.sh` - å¿«é€Ÿå¯åŠ¨è„šæœ¬

### ä»»åŠ¡ 5: åˆ›å»ºæ•°æ®åº“è®¾è®¡æ–‡æ¡£ âœ…
- **æ–‡æ¡£å†…å®¹**:
  - å®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆ10+ æ ¸å¿ƒè¡¨ï¼‰
  - ç”¨æˆ·å’Œç§Ÿæˆ·ç®¡ç†
  - åº”ç”¨ç®¡ç†
  - å·¥ä½œæµç®¡ç†
  - çŸ¥è¯†åº“ç®¡ç†
  - å¯¹è¯å’Œæ¶ˆæ¯
  - æ¨¡å‹æä¾›å•†
  - ç´¢å¼•ç­–ç•¥
  - æ€§èƒ½ä¼˜åŒ–å»ºè®®
  - å¤‡ä»½ç­–ç•¥

### ä»»åŠ¡ 6: ç¼–å†™é¡¹ç›®æ–‡æ¡£ âœ…
- **å¼€å‘æ–‡æ¡£**: `docs/guides/development.md`
  - ç¯å¢ƒè¦æ±‚
  - æœ¬åœ°å¼€å‘è®¾ç½®
  - å¼€å‘è§„èŒƒï¼ˆä»£ç é£æ ¼ã€Git è§„èŒƒã€API è®¾è®¡ï¼‰
  - æµ‹è¯•æŒ‡å—
  - è°ƒè¯•æ–¹æ³•
  - å¸¸è§é—®é¢˜

- **éƒ¨ç½²æ–‡æ¡£**: `docs/guides/deployment.md`
  - éƒ¨ç½²æ¶æ„
  - Docker Compose éƒ¨ç½²æ­¥éª¤
  - ç¯å¢ƒå˜é‡é…ç½®
  - æ•°æ®å¤‡ä»½ä¸æ¢å¤
  - ç›‘æ§ä¸æ—¥å¿—
  - å®‰å…¨åŠ å›º
  - æ€§èƒ½è°ƒä¼˜
  - æ•…éšœæ’æŸ¥

- **ç»„ä»¶æ–‡æ¡£**:
  - `api/README.md` - åç«¯ä½¿ç”¨æ–‡æ¡£
  - `web/README.md` - å‰ç«¯ä½¿ç”¨æ–‡æ¡£
  - `docker/README.md` - Docker éƒ¨ç½²æ–‡æ¡£

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### æ–‡ä»¶æ•°é‡
- **æ€»æ–‡ä»¶æ•°**: 80+ ä¸ªæ–‡ä»¶
- **åç«¯æ–‡ä»¶**: 30+ ä¸ª
- **å‰ç«¯æ–‡ä»¶**: 25+ ä¸ª
- **é…ç½®æ–‡ä»¶**: 15+ ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**: 10+ ä¸ª

### ä»£ç è¡Œæ•°ï¼ˆä¼°ç®—ï¼‰
- **é…ç½®ä»£ç **: ~2,000 è¡Œ
- **åŸºç¡€ä»£ç **: ~3,000 è¡Œ
- **æ–‡æ¡£**: ~3,500 è¡Œ
- **æ€»è®¡**: ~8,500 è¡Œ

### æŠ€æœ¯æ ˆ
**åç«¯**:
- Python 3.11 + Flask 3.1.2
- SQLAlchemy 2.0.29
- Celery 5.5.2
- PostgreSQL 15 + pgvector
- Redis 7
- Milvus 2.4

**å‰ç«¯**:
- Next.js 15
- React 19
- TypeScript 5.7
- Tailwind CSS 3.4
- Zustand 5.0
- SWR 2.2
- ReactFlow 11.11

**åŸºç¡€è®¾æ–½**:
- Docker & Docker Compose
- Nginx 1.25
- Gunicorn + Gevent

## ğŸ¯ é¡¹ç›®ç»“æ„

```
shadow-agents-platform/
â”œâ”€â”€ api/                    # åç«¯ API æœåŠ¡ (Python/Flask)
â”‚   â”œâ”€â”€ configs/           # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ repositories/     # æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ extensions/       # Flask æ‰©å±•
â”‚   â”œâ”€â”€ libs/             # å·¥å…·åº“
â”‚   â”œâ”€â”€ tasks/            # Celery ä»»åŠ¡
â”‚   â””â”€â”€ tests/            # æµ‹è¯•ä»£ç 
â”œâ”€â”€ web/                   # å‰ç«¯åº”ç”¨ (Next.js)
â”‚   â”œâ”€â”€ app/              # App Router é¡µé¢
â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”œâ”€â”€ service/          # API æœåŠ¡
â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ docker/                # Docker é…ç½®
â”‚   â”œâ”€â”€ nginx/            # Nginx é…ç½®
â”‚   â”œâ”€â”€ postgres/         # PostgreSQL é…ç½®
â”‚   â”œâ”€â”€ redis/            # Redis é…ç½®
â”‚   â””â”€â”€ milvus/           # Milvus é…ç½®
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/     # æ¶æ„æ–‡æ¡£ï¼ˆ6 ä¸ªï¼‰
â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“è®¾è®¡
â”‚   â”œâ”€â”€ guides/           # å¼€å‘/éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ plans/            # è®¡åˆ’æ–‡æ¡£ï¼ˆ7 ä¸ªï¼‰
â””â”€â”€ scripts/               # è„šæœ¬
    â”œâ”€â”€ deployment/       # éƒ¨ç½²è„šæœ¬
    â”œâ”€â”€ development/      # å¼€å‘è„šæœ¬
    â””â”€â”€ migration/        # è¿ç§»è„šæœ¬
```

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### å·²å®ç°çš„åŸºç¡€åŠŸèƒ½
1. âœ… å®Œæ•´çš„é¡¹ç›®ç»“æ„
2. âœ… åç«¯ Flask åº”ç”¨æ¡†æ¶
3. âœ… å‰ç«¯ Next.js åº”ç”¨æ¡†æ¶
4. âœ… Docker Compose ç¼–æ’
5. âœ… æ•°æ®åº“è®¾è®¡æ–‡æ¡£
6. âœ… å¼€å‘å’Œéƒ¨ç½²æ–‡æ¡£
7. âœ… ç¯å¢ƒé…ç½®æ¨¡æ¿
8. âœ… åŸºç¡€ç»„ä»¶å’ŒæœåŠ¡å±‚

### å¾…å®ç°çš„åŠŸèƒ½ï¼ˆé˜¶æ®µä¸‰ï¼‰
1. â³ ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆJWTï¼‰
2. â³ åº”ç”¨ç®¡ç†ï¼ˆCRUDï¼‰
3. â³ å·¥ä½œæµå¼•æ“æ ¸å¿ƒ
4. â³ çŸ¥è¯†åº“å’Œ RAG
5. â³ æ¨¡å‹æä¾›å•†é›†æˆ
6. â³ æ•°æ®æ¨¡å‹å®ç°
7. â³ API ç«¯ç‚¹å®ç°
8. â³ å‰ç«¯é¡µé¢å®Œå–„

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

æ ¹æ® `docs/plans/03-åç«¯å¤åˆ».md` æ–‡æ¡£ï¼Œé˜¶æ®µä¸‰å°†å®ç°ï¼š

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- JWT Token ç®¡ç†
- æƒé™æ§åˆ¶

### 2. åº”ç”¨ç®¡ç†
- åº”ç”¨ CRUD æ“ä½œ
- åº”ç”¨é…ç½®ç®¡ç†
- åº”ç”¨ç±»å‹æ”¯æŒï¼ˆChat/Completion/Agent/Workflowï¼‰

### 3. æ•°æ®æ¨¡å‹
- å®ç°æ‰€æœ‰æ•°æ®åº“æ¨¡å‹
- åˆ›å»ºè¿ç§»æ–‡ä»¶
- æ·»åŠ å…³ç³»å’Œç´¢å¼•

### 4. API ç«¯ç‚¹
- è®¤è¯ API
- åº”ç”¨ç®¡ç† API
- é…ç½®ç®¡ç† API

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒé…ç½®**: ä½¿ç”¨å‰å¿…é¡»é…ç½® `.env` æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯
2. **ä¾èµ–å®‰è£…**: å‰ç«¯éœ€è¦å…ˆè¿è¡Œ `npm install` æˆ– `pnpm install`
3. **æ•°æ®åº“è¿ç§»**: é¦–æ¬¡è¿è¡Œéœ€è¦æ‰§è¡Œ `flask db upgrade`
4. **API Key**: å¿…é¡»é…ç½®æœ‰æ•ˆçš„ OpenAI API Key æ‰èƒ½ä½¿ç”¨ AI åŠŸèƒ½

## ğŸ‰ æ€»ç»“

é˜¶æ®µäºŒï¼ˆåŸºç¡€ç»“æ„ï¼‰å·²å…¨éƒ¨å®Œæˆï¼é¡¹ç›®å·²ç»å…·å¤‡ï¼š
- âœ… å®Œæ•´çš„ç›®å½•ç»“æ„
- âœ… é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡
- âœ… Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… åŸºç¡€ä»£ç æ¡†æ¶
- âœ… å®Œæ•´çš„æ–‡æ¡£ä½“ç³»

ç°åœ¨å¯ä»¥å¼€å§‹é˜¶æ®µä¸‰çš„å…·ä½“åŠŸèƒ½å®ç°äº†ï¼

---

**åˆ›å»ºæ—¥æœŸ**: 2025-09-30  
**å®ŒæˆçŠ¶æ€**: âœ… 100% å®Œæˆ  
**ä¸‹ä¸€é˜¶æ®µ**: 03-åç«¯å¤åˆ».md
